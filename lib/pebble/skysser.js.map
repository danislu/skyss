{"version":3,"sources":["pebble/skysser.js"],"names":[],"mappings":";;AAAA,IAAI,OAAO,QAAQ,MAAR,CAAP;IACA,UAAU,kBAAV;;AAEJ,SAAS,UAAT,CAAoB,WAApB,EAAiC,QAAjC,EAA0C;;AAEtC,aAAS,OAAT,CAAiB,KAAjB,EAAuB;AACnB,gBAAQ,GAAR,CAAY,YAAY,KAAK,SAAL,CAAe,KAAf,CAAZ,CAAZ,CADmB;AAEnB,iBAAS,KAAT,EAAgB,IAAhB,EAFmB;KAAvB;;AAKA,aAAS,SAAT,CAAmB,QAAnB,EAA6B;AACzB,YAAI,WAAW,SAAS,MAAT,CAAgB,QAAhB,CADU;AAEzB,YAAI,YAAY,SAAS,MAAT,CAAgB,SAAhB,CAFS;;AAIzB,YAAI,MAAM,UAAU,sBAAV,GAAmC,mBAAmB,SAAnB,CAAnC,GAAmE,UAAnE,GAAgF,mBAAmB,QAAnB,CAAhF,GAA+G,MAA/G,GAAwH,mBAAmB,WAAnB,CAAxH,CAJe;AAKzB,gBAAQ,GAAR,CAAY,GAAZ,EALyB;;AAOzB,aAAK,EAAE,KAAK,GAAL,EAAU,MAAM,MAAN,EAAjB,EAAiC,UAAS,IAAT,EAAe;AAC5C,qBAAS,IAAT,EAAe,IAAf,EAD4C;SAAf,EAE9B,OAFH,EAPyB;KAA7B;;AAYA,cAAU,WAAV,CAAsB,kBAAtB,CAAyC,SAAzC,EAAoD,OAApD,EAnBsC;CAA1C;;AAsBA,OAAO,OAAP,GAAiB;AACb,gBAAY,oBAAS,GAAT,EAAa;AACrB,kBAAU,GAAV,CADqB;KAAb;AAGZ,YAAQ,UAAR;CAJJ","file":"pebble/skysser.js","sourcesContent":["var ajax = require('ajax'),\n    baseUrl = 'http://127.0.0.1';\n\nfunction getTheDate(destination, callback){\n\n    function onError(error){\n        console.log('ERROR: ' + JSON.stringify(error));\n        callback(error, null);\n    }\n\n    function onSuccess(position) {\n        var latitude = position.coords.latitude;\n        var longitude = position.coords.longitude;\n\n        var url = baseUrl + '/departures2?from_x=' + encodeURIComponent(longitude) + '&from_y=' + encodeURIComponent(latitude) + '&to=' + encodeURIComponent(destination);\n        console.log(url);\n\n        ajax({ url: url, type: 'json' }, function(data) {\n            callback(null, data);\n        }, onError);\n    }\n\n    navigator.geolocation.getCurrentPosition(onSuccess, onError);\n}\n\nmodule.exports = {\n    setApiRoot: function(url){\n        baseUrl = url;\n    },\n    update: getTheDate\n};\n"],"sourceRoot":"/source/"}