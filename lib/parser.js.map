{"version":3,"sources":["parser.js"],"names":[],"mappings":";;;;;QAEgB;;;;;;;;AAAT,SAAS,SAAT,CAAmB,IAAnB,EAAwB;AAC3B,QAAM,UAAU,MAAV,CADqB;AAE3B,QAAM,aAAa,gCAAb,CAFqB;AAG3B,QAAM,aAAa,wBAAb,CAHqB;AAI3B,QAAM,aAAa,kBAAb,CAJqB;;AAM3B,QAAI,QAAQ,CAAR,CANuB;AAO3B,QAAI,WAAW,KAAX,CAPuB;;AAS3B,QAAI,SAAS,EAAT;;;AATuB,QAYrB,SAAS,IAAI,qBAAW,MAAX,CAAkB;AACjC,mBAAW,mBAAC,IAAD,EAAO,OAAP,EAAmB;;;;;;;;;;;;;;;;;;AAkB1B,gBAAI,SAAS,OAAT,EAAiB;AACjB,2BAAW,KAAX,CADiB;AAEjB,wBAAQ,QAAQ,OAAR,CAAR;AACI,yBAAK,UAAL;AACI,gCAAQ,CAAR,CADJ;AAEI,8BAFJ;AADJ,yBAIS,UAAL;AACI,gCAAQ,KAAC,KAAU,CAAV,GAAe,CAAhB,GAAoB,CAApB,CADZ;AAEI,8BAFJ;AAJJ,yBAOS,UAAL;AACI,4BAAI,UAAU,CAAV,EAAY;AACZ,uCAAW,IAAX,CADY;AAEZ,oCAAQ,CAAR,CAFY;yBAAhB;AAIA,8BALJ;AAPJ;AAcQ,8BADJ;AAbJ,iBAFiB;aAArB;SAlBO;AAsCX,gBAAQ,gBAAC,IAAD,EAAU;AACd,gBAAI,QAAJ,EAAa;AACT,2BAAW,CAAC,QAAD,CADF;AAET,uBAAO,IAAP,CAAY,IAAZ,EAFS;aAAb;SADI;KAvCG,CAAT,CAZqB;AA0D3B,WAAO,KAAP,CAAa,IAAb,EA1D2B;AA2D3B,WAAO,GAAP,GA3D2B;;AA6D3B,WAAO,MAAP,CA7D2B;CAAxB","file":"parser.js","sourcesContent":["import htmlparser from 'htmlparser2';\r\n\r\nexport function parseData(data){\r\n    const tagName = 'span';\r\n    const attrValue1 = 'tm-inline-block tm-result-time';\r\n    const attrValue2 = 'tm-result-time-wrapper';\r\n    const attrValue3 = 'tm-result-fratil';\r\n\r\n    let depth = 0;\r\n    let getValue = false;\r\n\r\n    let result = [];\r\n\r\n    //    if (name === 'h2' && attr['class'] === 'tm-alpha tm-reiseforslag-header'){\r\n    const parser = new htmlparser.Parser({\r\n        onopentag: (name, attribs) => {\r\n\r\n/*\r\nh2 class=\"tm-alpha tm-reiseforslag-header\"\r\n    dato\r\n\r\nspan class=tm-inline-block tm-result-time\r\n    span class=tm-result-time-wrapper\r\n        span class=tm-result-fratil\r\n            start tid\r\n        span class=tm-result-fratil\r\n            slutt tid\r\n        span class=\"tm-result-info-val\"\r\n            duration\r\n        span class=\"tm-tripmenu-linenr\"\r\n            linjeNo\r\n*/\r\n\r\n            if (name === tagName){\r\n                getValue = false;\r\n                switch (attribs['class']) {\r\n                    case attrValue1:\r\n                        depth = 1;\r\n                        break;\r\n                    case attrValue2:\r\n                        depth = (depth === 1) ? 2 : 0;\r\n                        break;\r\n                    case attrValue3:\r\n                        if (depth === 2){\r\n                            getValue = true;\r\n                            depth = 0;\r\n                        }\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            }\r\n        },\r\n        ontext: (text) => {\r\n            if (getValue){\r\n                getValue = !getValue;\r\n                result.push(text);\r\n            }\r\n        }\r\n    });\r\n    parser.write(data);\r\n    parser.end();\r\n\r\n    return result;\r\n}\r\n"],"sourceRoot":"/source/"}